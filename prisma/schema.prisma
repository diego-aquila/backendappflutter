// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  id    Int    @id @unique @default(autoincrement())
  email String @unique

  isActive Boolean @default(true)
  name     String
  cpf      Int     @unique

  password String
  celphone String
  class    Classes @relation(fields: [classFK], references: [name])
  classFK  String

  ExamUser      ExamUser[]
  FeedbackExame FeedbackExam[]

  Roles  Roles  @relation(fields: [roleFK], references: [name])
  roleFK String
  Plans  Plans  @relation(fields: [planFK], references: [name])
  planFK String
}

model Classes {
  id   Int    @id @unique @default(autoincrement())
  name String @unique

  Users Users[]
  Mural Mural[]
}

model Exams {
  id   Int      @id @unique @default(autoincrement())
  data DateTime
  name String

  ExamUser      ExamUser[]
  FeedbackExame FeedbackExam[]
}

model ExamUser {
  id Int @id @unique @default(autoincrement())

  exam    Exams @relation(fields: [examsFK], references: [id])
  examsFK Int

  Users  Users @relation(fields: [userFK], references: [cpf])
  userFK Int
}

model FeedbackExam {
  id        Int    @unique
  Users     Users  @relation(fields: [usersIdFK], references: [id])
  usersIdFK Int
  result    String
  feedbacks Json

  Exams     Exams @relation(fields: [examsIdFK], references: [id])
  examsIdFK Int
}

model Requisitos {
  id   Int    @id @default(autoincrement())
  name String
}

model Plans {
  id    Int     @id @unique @default(autoincrement())
  name  String  @unique
  price Decimal

  Users Users[]
}

model Roles {
  id   Int    @id @unique @default(autoincrement())
  name String @unique

  Users Users[]
}

model Mural {
  id    Int      @id @unique @default(autoincrement())
  date  DateTime @default(now())
  title String

  Classes Classes? @relation(fields: [classFK], references: [name])
  classFK String
}
